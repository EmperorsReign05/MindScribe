@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 250, 250, 250;
    --foreground: 15, 23, 42;
    --card: 255, 255, 255;
    --card-foreground: 15, 23, 42;
    --popover: 255, 255, 255;
    --popover-foreground: 15, 23, 42;
    --primary: 20, 184, 166;
    --primary-foreground: 255, 255, 255;
    --secondary: 241, 245, 249;
    --secondary-foreground: 15, 23, 42;
    --muted: 241, 245, 249;
    --muted-foreground: 100, 116, 139;
    --accent: 240, 253, 250;
    --accent-foreground: 15, 23, 42;
    --destructive: 239, 68, 68;
    --destructive-foreground: 255, 255, 255;
    --border: 226, 232, 240;
    --input: 226, 232, 240;
    --ring: 20, 184, 166;
    --radius: 1rem;
    
    /* Chat-specific colors */
    --chat-user-bg: 20, 184, 166;
    --chat-user-text: 255, 255, 255;
    --chat-ai-bg: 255, 255, 255;
    --chat-ai-text: 15, 23, 42;
    --chat-ai-border: 226, 232, 240;
  }

  .dark {
    --background: 15, 23, 42;
    --foreground: 248, 250, 252;
    --card: 30, 41, 59;
    --card-foreground: 248, 250, 252;
    --popover: 30, 41, 59;
    --popover-foreground: 248, 250, 252;
    --primary: 45, 212, 191;
    --primary-foreground: 15, 23, 42;
    --secondary: 51, 65, 85;
    --secondary-foreground: 248, 250, 252;
    --muted: 51, 65, 85;
    --muted-foreground: 148, 163, 184;
    --accent: 51, 65, 85;
    --accent-foreground: 248, 250, 252;
    --destructive: 239, 68, 68;
    --destructive-foreground: 255, 255, 255;
    --border: 51, 65, 85;
    --input: 51, 65, 85;
    --ring: 45, 212, 191;
    
    /* Chat-specific colors - dark mode */
    --chat-user-bg: 20, 184, 166;
    --chat-user-text: 255, 255, 255;
    --chat-ai-bg: 30, 41, 59;
    --chat-ai-text: 248, 250, 252;
    --chat-ai-border: 51, 65, 85;
  }

  * {
    border-color: rgb(var(--border));
  }
  
  html {
    scroll-behavior: smooth;
  }
  
  body {
    background-color: rgb(var(--background));
    color: rgb(var(--foreground));
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* Modern scrollbar */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgb(var(--muted)) transparent;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 3px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgb(var(--muted-foreground) / 0.3);
    border-radius: 3px;
    transition: background 0.2s ease;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: rgb(var(--muted-foreground) / 0.5);
  }
  
  .dark .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgb(var(--muted-foreground) / 0.2);
  }
  
  .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: rgb(var(--muted-foreground) / 0.4);
  }
  
  /* Smooth animations */
  .animate-fade-in {
    animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  .animate-slide-up {
    animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  .animate-scale-in {
    animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Typing indicator animation */
  .typing-dot {
    animation: typingBounce 1.4s ease-in-out infinite both;
  }
  
  .typing-dot:nth-child(1) { animation-delay: 0s; }
  .typing-dot:nth-child(2) { animation-delay: 0.2s; }
  .typing-dot:nth-child(3) { animation-delay: 0.4s; }
  
  @keyframes typingBounce {
    0%, 80%, 100% {
      transform: scale(0.6);
      opacity: 0.4;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Glass effect */
  .glass {
    @apply bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl;
  }
  
  .glass-subtle {
    @apply bg-white/60 dark:bg-slate-900/60 backdrop-blur-lg;
  }

  /* Gradient backgrounds - FIXED for scrolling */
  .gradient-mesh {
    position: relative;
  }
  
  .gradient-mesh::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    background: 
      radial-gradient(at 40% 20%, rgb(20 184 166 / 0.08) 0px, transparent 50%),
      radial-gradient(at 80% 0%, rgb(34 197 94 / 0.06) 0px, transparent 50%),
      radial-gradient(at 0% 50%, rgb(6 182 212 / 0.08) 0px, transparent 50%),
      radial-gradient(at 80% 50%, rgb(16 185 129 / 0.05) 0px, transparent 50%),
      rgb(var(--background));
  }
  
  .dark .gradient-mesh::before {
    background: 
      radial-gradient(at 40% 20%, rgb(20 184 166 / 0.12) 0px, transparent 50%),
      radial-gradient(at 80% 0%, rgb(34 197 94 / 0.08) 0px, transparent 50%),
      radial-gradient(at 0% 50%, rgb(6 182 212 / 0.1) 0px, transparent 50%),
      rgb(var(--background));
  }

  /* Message bubbles */
  .message-user {
    @apply bg-teal-500 text-white;
    border-radius: 1.25rem 1.25rem 0.25rem 1.25rem;
  }
  
  .message-ai {
    @apply bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-700;
    border-radius: 1.25rem 1.25rem 1.25rem 0.25rem;
  }

  /* Input focus ring */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 dark:focus:ring-teal-400/30 dark:focus:border-teal-400;
  }
  
  /* Smooth transitions */
  .transition-smooth {
    @apply transition-all duration-300 ease-out;
  }
}

/* Custom button styles */
@layer components {
  .btn-primary {
    @apply bg-teal-500 hover:bg-teal-600 active:bg-teal-700 text-white font-medium shadow-lg shadow-teal-500/25 hover:shadow-xl hover:shadow-teal-500/30 transition-all duration-200;
  }
  
  .btn-ghost {
    @apply hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300 transition-colors duration-200;
  }
  
  .btn-icon {
    @apply p-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-all duration-200;
  }
  
  /* Card styles */
  .card-elevated {
    @apply bg-white dark:bg-slate-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-slate-900/50 border border-slate-100 dark:border-slate-700;
  }
  
  /* Sidebar item */
  .sidebar-item {
    @apply p-3 rounded-xl cursor-pointer transition-all duration-200 hover:bg-slate-100 dark:hover:bg-slate-800;
  }
  
  .sidebar-item-active {
    @apply bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-200 dark:border-indigo-500/30;
  }
}

/* Selection color */
::selection {
  @apply bg-indigo-500/20 text-indigo-900 dark:text-indigo-100;
}